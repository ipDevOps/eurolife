@using Wedia.Feature.EurolifeCalculatorTool.Models
@using Wedia.Foundation.Dictionary.Extensions
@using Wedia.Foundation.SitecoreExtensions.Extensions
@using System.Linq
@using Wedia.Feature.EurolifeCalculatorTool

@model  OfferViewModel

<section class="center center--650 m-b-32 t-c">
  <div class="target-group__icon target-group__icon--selected">
    <img src="@Model.UserSelection.TargetGroup.Image">
  </div>
  <h1 class="m-b-8 tool-title">@Html.Sitecore().Dictionary("/EurolifeCalculatorTool/Step4/Title", "Title")</h1>
</section>

<section class="m-b-46 center--1100 center pick">


  <h1 class="m-b-8 tool-title">@Html.Sitecore().Dictionary("/EurolifeCalculatorTool/Step4/HospitalInsurance", "Title")</h1>

  <div class="pick__item pick__item--selected m-b-16 js-pick-expander" onclick="ExpandProgram(this, arguments);">
    <div class="pick__head">
      <div class="pick__titles">
        <h3 class="pick__title pick__sup-title">
          @Html.Sitecore().Dictionary("/EurolifeCalculatorTool/Step4/ProductTitle", "ProductTitle")
        </h3>
        <h2 class="pick__title pick__main-title p-r-50">
          @Model.Product.Title
        </h2>
      </div>


      <div class="pick__seat">
        <h3 class="pick__title pick__sup-title">
          @Html.Sitecore().Dictionary("/EurolifeCalculatorTool/Step4/HospitalizationTitle", "HospitalizationTitle")
        </h3>
        <h4 class="pick__title pick__sec-title">
          @Model.Product.Hospitalization
        </h4>
      </div>

      <div class="pick__exemption">
        <h3 class="pick__title pick__sup-title">
          @Html.Sitecore().Dictionary("/EurolifeCalculatorTool/Step4/AmountTitle", "AmountTitle")
        </h3>
        <h4 class="pick__title pick__sec-title">
          @Model.Product.Amount
        </h4>
      </div>

      <div class="pick__premium">
        <h3 class="pick__title pick__sup-title">
          @Html.Sitecore().Dictionary("/EurolifeCalculatorTool/Step4/CostTitle", "CostTitle")
        </h3>
        <h4 class="pick__title pick__big-title"
            data-CoverPremium="@Model.Product.Price.CoverPremium"
            data-CoverPremium2="@Model.Product.Price.CoverPremium2"
            data-CoverPremium4="@Model.Product.Price.CoverPremium4"
            data-CoverPremium12="@Model.Product.Price.CoverPremium12">
          @Model.Product.Price.CoverPremium.ToGreekFormat() €
        </h4>
      </div>

      <div class="pick__radio relator">
        <span class="pick__expander"><svg viewBox="0 0 96 96" xmlns="http://www.w3.org/2000/svg"><path d="M82.6074,62.1072,52.6057,26.1052a6.2028,6.2028,0,0,0-9.2114,0L13.3926,62.1072a5.999,5.999,0,1,0,9.2114,7.6879L48,39.3246,73.396,69.7951a5.999,5.999,0,1,0,9.2114-7.6879Z" /></svg></span>
        @*<input type="radio" class="js-pick-radio" id="product-1" name="insurance-product" value="" checked="checked" onclick="SelectProgram(this, arguments);">
          <label for="product-1"></label>*@
      </div>
    </div>

    <div class="pick__body-expander">
      <div class="pick__body">
        <h3 class="h4">@Html.Sitecore().Dictionary("/EurolifeCalculatorTool/Step4/InsuredPeople", "InsuredPeople")</h3>
        <div class="pick__insured m-b-32">
          @foreach (var familyMemnber in Model.Product.InsuredPeople)
          {
            <figure>
              <img src="@familyMemnber.Image">
              <figcaption>@familyMemnber.Title</figcaption>
            </figure>
          }
        </div>
        <h3 class="h4">@Html.Sitecore().Dictionary("/EurolifeCalculatorTool/Step4/ProductDescription", "ProductDescription")</h3>

        @Model.Product.RTE
      </div>
    </div>
  </div>
</section>


@if (Model.GroupOfBundles != null && Model.GroupOfBundles.Any())
{
  <!-- bundles  -->
  <section class="m-b-46 center--1100 center">
    <div class="flex-spread flex-align-center m-t-32 m-b-24 relator">
      <div class="flexify">
        <h1 class="m-b-8 m-t-8 tool-title">@Html.Sitecore().Dictionary("/EurolifeCalculatorTool/Step4/BundlesTitle", "BundlesTitle")</h1>
        <label class="switch switch--pick">
          <input type="checkbox" id="activate-extras" value="activate-extras" onclick="ActivateExtras(this, arguments);">
          <span class="switch__slider"></span>
        </label>
      </div>

      @if (Model.InfoTabs != null && Model.InfoTabs.Any())
      {
        <!-- SVG BUTTON -->
        <a href="#" class="js-toggle-modal explanation">
          <?xml version="1.0" encoding="UTF-8" ?>
          <svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <g id="Health-calculator" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
              <g id="1.4-Calculator_Tool-1440" transform="translate(-988.000000, -333.000000)" fill="#0046FE">
                <g id="Content" transform="translate(406.000000, 331.000000)">
                  <g id="IconsRE/Actions/Info_Oval" transform="translate(580.000000, 0.000000)">
                    <path d="M12,2 C6.5,2 2,6.5 2,12 C2,17.5 6.5,22 12,22 C17.5,22 22,17.5 22,12 C22,6.5 17.5,2 12,2 Z M14,16 C14,17.1 13.1,18 12,18 C10.9,18 10,17.1 10,16 L10,13 C10,11.9 10.9,11 12,11 C13.1,11 14,11.9 14,13 L14,16 Z M12,10 C10.9,10 10,9.1 10,8 C10,6.9 10.9,6 12,6 C13.1,6 14,6.9 14,8 C14,9.1 13.1,10 12,10 Z" id="Icon"></path>
                  </g>
                </g>
              </g>
            </g>
          </svg>
        </a>
        <!-- SVG BUTTON -->
      }
    </div>

    <div class="pick pick--extras pick--extras__deactive">
      @foreach (var item in Model.GroupOfBundles.Select((value, index) => new { value, index }))
      {
        <div class="pick__item">
          <div class="pick__titles">
            <h2 class="pick__title pick__main-title">
              @item.value.Title
            </h2>
            <div class="pick__radio">
              <input type="radio" id="bundle_@item.index" name="insurance-product-extra" value="" class="product-extra-radio" onclick="SelectProgram(this, arguments);">
              <label for="bundle_@item.index"></label>
            </div>
          </div>
          <div class="pick--extras__more">
            <h3 class="pick__title pick__sup-title cover_duration">
              @Html.Sitecore().Dictionary("/EurolifeCalculatorTool/Step4/BundlesDuration/12-Months", "12-Months")
            </h3>
            <h4 class="pick__title pick__big-title"
                data-CoverPremium="@item.value.Price.CoverPremium"
                data-CoverPremium2="@item.value.Price.CoverPremium2"
                data-CoverPremium4="@item.value.Price.CoverPremium4"
                data-CoverPremium12="@item.value.Price.CoverPremium12">
              @item.value.Price.CoverPremium.ToGreekFormat() €
            </h4>
            <h3 class="pick__title pick__sup-title">
              @Html.Sitecore().Dictionary("/EurolifeCalculatorTool/Step4/IncludeLabel", "IncludeLabel")
            </h3>
            <ul class="pick--extras__list">
              @foreach (var subItem in item.value.Bundles)
              {
                <li>@subItem.Title</li>
              }
            </ul>
          </div>
        </div>
      }
    </div>
  </section>
}

<section class="center center--1100 m-t-48 m-b-24">
  <div class="disclaimer">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="24px" height="24px">
      <g id="surface10490669">
        <path style=" stroke:none;fill-rule:nonzero;fill:#2D6BD1;fill-opacity:1;" d="M 12 2 C 6.488281 2 2 6.488281 2 12 C 2 17.511719 6.488281 22 12 22 C 17.511719 22 22 17.511719 22 12 C 22 6.488281 17.511719 2 12 2 Z M 12 4 C 16.429688 4 20 7.570312 20 12 C 20 16.429688 16.429688 20 12 20 C 7.570312 20 4 16.429688 4 12 C 4 7.570312 7.570312 4 12 4 Z M 11 7 L 11 9 L 13 9 L 13 7 Z M 11 11 L 11 17 L 13 17 L 13 11 Z M 11 11 " />
      </g>
    </svg>

    <span>
      @Html.Sitecore().Dictionary("/EurolifeCalculatorTool/Step4/Disclaimer", "Disclaimer Notice")
    </span>
  </div>
</section>

<section class=" center--1100 center pick-actions m-b-24 m-t-48">
  @if (Model.RenderingItem.FieldHasValue(Templates.HasCTA.Fields.Link))
  {
    var linkURL = Model.RenderingItem.LinkFieldUrl(Templates.HasCTA.Fields.Link);
    var linkDescription = Model.RenderingItem.LinkFieldOptions(Templates.HasCTA.Fields.Link, Wedia.Foundation.SitecoreExtensions.Extensions.LinkFieldOption.Text);
    <div class="actions__links m-b-24 m-t-24">
      <a class="btn btn--ghost-rev btn--default" href="@linkURL">@linkDescription</a>
    </div>
  }

  <div class="actions__results">
    <div class="actions__results__sum">
      <h3 class="h6">@Html.Sitecore().Dictionary("/EurolifeCalculatorTool/Step4/TotalCost", "TotalCost")</h3>
      <h2 class="pick__title pick__big-title" id="totalCost">@Model.Product.Price.CoverPremium.ToGreekFormat() €</h2>
    </div>

    <div class="results">
      <select name="covers_duration" id="covers_duration">
        <option value="coverPremium" selected=selected
                data-bundlesduration="@Html.Sitecore().Dictionary("/EurolifeCalculatorTool/Step4/BundlesDuration/12-Months", "12-Months")">
          @Html.Sitecore().Dictionary("/EurolifeCalculatorTool/Step4/DropDownDuration/12-Months", "12-Months")
        </option>
        <option value="coverPremium2"
                data-bundlesduration="@Html.Sitecore().Dictionary("/EurolifeCalculatorTool/Step4/BundlesDuration/6-Months", "6-Months")">
          @Html.Sitecore().Dictionary("/EurolifeCalculatorTool/Step4/DropDownDuration/6-Months", "6-Months")
        </option>
        <option value="coverPremium4"
                data-bundlesduration="@Html.Sitecore().Dictionary("/EurolifeCalculatorTool/Step4/BundlesDuration/3-Months", "3-Months")">
          @Html.Sitecore().Dictionary("/EurolifeCalculatorTool/Step4/DropDownDuration/3-Months", "3-Months")
        </option>
        <option value="coverPremium12"
                data-bundlesduration="@Html.Sitecore().Dictionary("/EurolifeCalculatorTool/Step4/BundlesDuration/1-Month", "1-Month")">
          @Html.Sitecore().Dictionary("/EurolifeCalculatorTool/Step4/DropDownDuration/1-Month", "1-Month")
        </option>
      </select>
    </div>
  </div>
</section>

<!-- MODAL -->
@if (Model.InfoTabs != null && Model.InfoTabs.Any())
{
  <div class="tool-modal js-tool-modal">
    <div class="tool-modal__inner">
      <!-- CLOSE BUTTON -->
      <div class="tool-modal__close js-toggle-modal">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="60" height="60" viewBox="0 0 60 60">
          <defs>
            <path id="search" d="M47.979 12.021a2.859 2.859 0 0 0-4.043 0L30 25.957 16.064 12.021a2.859 2.859 0 1 0-4.043 4.043L25.957 30 12.021 43.936a2.859 2.859 0 1 0 4.043 4.043L30 34.043l13.936 13.936a2.859 2.859 0 1 0 4.043-4.043L34.043 30l13.936-13.936a2.859 2.859 0 0 0 0-4.043z"></path>
          </defs>
          <use fill="#383b38" fill-rule="nonzero" xlink:href="#search"></use>
        </svg>
      </div>
      <!-- CLOSE BUTTON -->
      <!-- CONTENT -->
      <div class="tool__content tabs">
        <!-- TAB HEADERS -->
        <div class="tabs__headers">
          @foreach (var item in Model.InfoTabs.Select((value, index) => new { value, index }))
          {
            <h3 class="js-tab @(item.index == 0 ? "active" : null)">@item.value.Title</h3>
          }         
        </div>
        <!-- TAB HEADERS -->
        <!-- TAB CONTENT -->
        <div class="tabs__tabs js-tabs">
          @foreach (var item in Model.InfoTabs.Select((value, index) => new { value, index }))
          {
            <article class="innertab @(item.index == 0 ? "active" : null)">
              <!-- RTE CONTENT -->
                 @item.value.RTE
              <!-- RTE CONTENT -->
            </article>
          }
        </div>
        <!-- TAB CONTENT -->
      </div>
      <!-- CONTENT -->
    </div>
  </div>
  <!-- MODAL -->
}
